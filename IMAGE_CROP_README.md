# PNG图片批量裁剪工具

一个智能的PNG图片批量裁剪工具，能够自动检测文字内容并移除上下空白区域，同时保留保护性边距。

## 🚀 功能特点

- ✅ **智能检测**: 自动识别文字内容边界
- ✅ **保护性边距**: 防止过度裁剪，保留适当空白
- ✅ **批量处理**: 支持目录批量处理和递归处理
- ✅ **可配置**: 自定义边距和检测阈值
- ✅ **安全操作**: 可选择输出到新目录，避免覆盖原文件

## 📦 安装依赖

```bash
pip install Pillow numpy
```

## 💻 使用方法

### 基本用法

```bash
# 裁剪单个文件
python image_crop_tool.py input.png

# 批量处理目录
python image_crop_tool.py F:/OS/Downloads/ssss3/

# 输出到指定目录
python image_crop_tool.py images/ -o cropped/

# 递归处理子目录
python image_crop_tool.py images/ -r
```

### 高级选项

```bash
# 自定义保护边距（默认10像素）
python image_crop_tool.py images/ -p 15

# 自定义检测阈值（默认240，范围0-255）
python image_crop_tool.py images/ -t 250

# 组合使用
python image_crop_tool.py images/ -o output/ -p 20 -t 230 -r
```

## ⚙️ 参数说明

- `input`: 输入文件或目录路径
- `-o, --output`: 输出目录（可选，默认覆盖原文件）
- `-p, --padding`: 保护性边距像素数（默认: 10）
- `-t, --threshold`: 空白检测阈值 0-255（默认: 240）
- `-r, --recursive`: 递归处理子目录
- `--preview`: 预览模式（暂未实现）

## 🔧 工作原理

1. **图像分析**: 将PNG图片转换为灰度图像
2. **内容检测**: 使用阈值方法识别非空白区域
3. **边界计算**: 找到文字内容的上下边界
4. **安全裁剪**: 添加保护性边距，防止过度裁剪
5. **输出保存**: 保存裁剪后的图片，支持压缩优化

## 📝 示例输出

```
找到 5 个PNG文件
开始处理，设置: 边距=10px, 阈值=240
------------------------------------------------------------
[1/5] 处理中... ✓ image1.png: (800, 600) → (800, 350) (高度减少 41.7%)
[2/5] 处理中... ✓ image2.png: (1200, 800) → (1200, 450) (高度减少 43.8%)
[3/5] 处理中... ✓ image3.png: (600, 400) → (600, 280) (高度减少 30.0%)
[4/5] 处理中... ✓ image4.png: (900, 700) → (900, 380) (高度减少 45.7%)
[5/5] 处理中... ✓ image5.png: (1000, 600) → (1000, 320) (高度减少 46.7%)
------------------------------------------------------------
处理完成: 5/5 个文件成功
✓ 所有文件处理成功
```

## ⚠️ 注意事项

- 仅支持PNG格式图片
- 建议在处理前备份重要文件
- 对于复杂背景的图片，可能需要调整检测阈值
- 极小的图片（高度<50px）会保持最小尺寸